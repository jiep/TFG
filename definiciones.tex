\section{Grafos}

\begin{defi}
\textcolor{red}{Grafo}
\end{defi}

\begin{defi}
\textcolor{red}{Orden de un grafo}
\end{defi}

\begin{defi}
\textcolor{red}{Grado de un grafo}
\end{defi}

\begin{defi}
\textcolor{red}{Conjunto parcialmente ordenado}
\end{defi}

\begin{defi}
\textcolor{red}{Ciclo de un grafo}
\end{defi}

\begin{defi}
\textcolor{red}{Orientación de un grafo}
\end{defi}

\begin{defi}
\textcolor{red}{Orientación transitiva}
\end{defi}

\begin{defi}
La fuerza de un nodo en un grafo ponderado es la suma de los pesos de los arcos incidentes.
\end{defi}

\begin{defi}
Una camarilla\footnote{Traducción de clique} es un conjunto de nodos mutuamente conectados entre ellos.
\end{defi}

\begin{defi}
Un grafo $G = (\mathcal{N}, E)$ es cordal\footnote{Traducción de chordal.} si cada sus ciclos de cuatro o más vértices tiene una cuerda\footnote{Traducción de chord}, que es un vértice que une dos nodos que no son adyacentes en el ciclo.
\end{defi}

\begin{defi}
Dado un conjunto parcialmente ordenado $(\mathcal{N}, \preceq)$, podemos asociar un grafo dirigido $G_\preceq$ a $(\mathcal{N}, \preceq)$ definido de la siguiente manera: el conjunto de vértices es $\mathcal{N}$ y hay un enlace desde $i$ hasta $j$, $i \neq j$, if $i \preceq j$.
\end{defi}

\begin{defi}
Un grafo $G = (\mathcal{N}, E)$ es un grafo de comparabilidad\footnote{Traducción de comparability.} si el grafo no dirigido obtenido después de eliminar la orientación en $G_\preceq$ para algún orden parcial $\preceq$ de $\mathcal{N}$.  
\end{defi}

\begin{defi}
Se ha probado que un grafo $G = (\mathcal{N},E)$ es un grafo de comparabilidad sii admite una orientación transitiva de sus vértices, es decir, si hay un grafo dirigido $\vec{G} = (\mathcal{N}, \vec{E})$ obtenido de $G$ orientando sus arcos en $E$, tal que $(i,j)$, $(j,k) \in \vec{E}$, entonces $(i,k) \in \vec{E}$. 
\end{defi}

\begin{defi}
Un grafo $G = (\mathcal{N}, E)$ es un grafo de permutación\footnote{Traducción de permutation} si sus vértices representan los elementos de una permutación y cada uno de sus arcos corresponden a un par de elementos que están invertidos por la permutación.  
\end{defi}

\begin{nota} \label{nota}
Una caracterización de los grafos de permutaciones es el hecho de que el grafo $G$ y su complemento $\bar{G}$ (el grafo con el mismo conjunto de nodos y enlaces entre nodos que no están enlazados en $G$) son grafos de comparabilidad, es decir, que admiten una orientación transitiva de sus arcos.
\end{nota}

\begin{nota}
Notar que los grafos de permutaciones son grafos de comparabilidad y grafos de competitividad (simplemente considerando dos rankings: $c_1 = id$ y $c_2$ como una permutación que constituye el grafo de permutaciones).
\end{nota}

\begin{defi} \label{cohesivo}
Si $G=(\mathcal{N}, E)$ es un grafo, decimos que $G$ tiene un orden cohesivo del conjunto de vértices\footnote{Traducción cohesive vertex-set order} (o simplemente orden cohesivo) si existe un renombramiento de los nodos tal que:
\begin{enumerate}
\item hay un enlace entre los nodos $a$ y $b$ y $a < b$, then for cada $x$, $a < x < b$, debe existir un enlace entre $a$ y $b$ o un enlace entre $x$ y $b$.
\item (transitividad) si existe un enlace entre los nodos $a$ y $x$, otro entre $x$ y $b$, y $a < x < b$, entonces $a$ y $b$ también están enlazados.
\end{enumerate}
\end{defi}

\begin{teo}
$G = (\mathcal{N}, E)$ es un grafo de permutación sii tiene orden cohesivo del conjunto de vértices. 
\end{teo}

\begin{nota}
Notar que, por la nota \ref{nota}, para cada grafo de comparabilidad hay siempre un renombramiento de los nodos tal que satisface la condición 2 de la definición \ref{cohesivo} (transitividad) ya que admite una orientación transitiva de sus vértices (de hecho, esa condición caracteriza los los grafos de comparabilidad).
\end{nota}

\begin{defi}
Si $G=(\mathcal{N}, E)$ es un grafo, decimos que $G$ tiene un orden semicohesivo del conjunto de vértices (o simplemente orden semicohesivo) si existe un renombramiento de los nodos tal que verifica la condición 1 de la definición \ref{cohesivo}, es decir, si existe un enlace entre los nodos $a$ y $b$ y $a < b$, entonces para cada $x$, $a < x < b$, debe existir un enlace entre $a$ y $x$ o un enlace entre $x$ y $b$. Decimos que un grafo $G$ es semicohesivo si tiene un orden semicohesivo del conjunto de vértices. 
\end{defi}

\begin{lema}
Todo grafo de competitividad es semicohesivo.
\end{lema}

\begin{defi}
Si $G=(\mathcal{N},E)$ es un grafo, definimos los vecinos comunes de un par de nodos $i,j \in \mathcal{N}$ como el conjunto de nodos que están unidos a $i$ o $j$ (o a ambos).
\end{defi}

\begin{lema}
Si un grafo $G=(\mathcal{N},E)$ es semicohesivo con respecto a algún nombramiento de sus nodos y hemos renombrado $\mathcal{N}$ de acuerdo a este nombramiento, entonces si $i,j \in \mathcal{N}$ están unidos, entonces el número de los vecinos comunes de $i$ y $j$ es al menos $|i-j|-1$.
\end{lema}

\begin{lema}
Cada ciclo de $n$ vértices $C_n$ con $n \geq 5$ no es semicohesivo, y por tanto, no es un grafo de competitividad.
\end{lema}

\begin{lema}

\end{lema}

\section{Rankings}

\begin{defi}
Dado un conjunto $\mathcal{N} = \{1,\dots,n\}$ que llamaremos nodos, definimos un ranking $c$ de $\mathcal{N}$ como cualquier biyección $c: \mathcal{N} \to \mathcal{N}$.\\
Escribiremos $i \prec_c j$ cuando el nodo $i$ aparezca antes que el nodo $j$ en el ranking $c$.
\end{defi}

\begin{defi}
Dada una familia finita $\mathcal{R} = \{c_1,c_2,\dots, c_r\}$ de rankings, decimos que el par de nodos $(i,j) \in \mathcal{N}$ ``compiten'' si existe $t \in \{1,2,\dots, r-1\}$ tal que $i$ y $j$ intercambian sus posiciones relativas entre dos rankings consecutivos $c_t$ y $c_{t+1}$.
\end{defi}

\begin{defi}
Definimos el grafo de competitividad de la familia de rankings $R$, denotado como $G_c(\mathcal{R}) = (\mathcal{N}, E_\mathcal{R})$, donde $E_\mathcal{R}$ denota el conjunto de arcos, como el grafo no dirigido con nodos $\mathcal{N}$ y arcos dados por la siguiente regla: hay un enlace entre $i$ y $j$ si $(i,j)$ ``compiten''.
\end{defi}

\begin{defi}
Decimos que dos nodos $i$, $j$ ``compiten'' $k$ veces, si $k$ es el número máximo de rankings donde $i$ y $j$ ``compiten''.
\end{defi}

\begin{defi}
Definimos el grafo de competitividad evolutivo de $\mathcal{R}$, denotado como $G_c^e(\mathcal{R}) = (\mathcal{N}, E_\mathcal{R}^e)$, como el grafo no dirigido ponderado con nodos $\mathcal{N}$ y arcos dados por la siguiente regla: hay un arco entre $i$ y $j$ etiquetado con peso $k$ si $(i,j)$ compiten $k$ veces.
\end{defi}

\begin{nota}
Notar que la red no ponderada detrás del grafo ponderado $G_c^e(\mathcal{R})$ es $G_c(\mathcal{R})$.
\end{nota}

\begin{nota}
Notar que el orden de los rankings es fundamental en el cálculo de los pesos del grafo de competitividad evolutivo, aunque no tiene influencia en el grafo de competitividad (no ponderado).
\end{nota}

\begin{defi}
Definimos el grado medio normalizado (normalized mean degree) de una familia de rankings $\mathcal{R}$ como la suma de todos los grados del grafo competitivo $G_c(\mathcal{R})$, dividido por la suma de todos los nodos de su mayor grado

\[ND(\mathcal{R}) = \dfrac{1}{n(n-1)} \sum_{i \in \mathcal{N}} k_i\]

donde $k_i$ es el número de nodos adyacentes al nodo $i$.
\end{defi}

\begin{ob}
Este parámetro nos da una idea global del número relativo de veces entre dos posibles competidores han intercambiado sus posiciones relativas a lo largo de la correspondiente familia de rankings.
\end{ob}

\begin{defi}
Decimos que el ranking $\mathcal{R}$ es más competitivo que el ranking $\mathcal{S}$ con respecto al grado medio normalizado si $ND(\mathcal{R}) > ND(\mathcal{S})$.
\end{defi}

\begin{defi}
Definimos la fuerza media generalizada de una familia de rankings $\mathcal{R}$ como la suma de todos los pesos de los arcos del grafo de competitividad evolutivo $G_c^e(\mathcal{R})$ dividido entre la suma de todos los posibles arcos con sus mayores pesos

\[ NS(\mathcal{R}) = \dfrac{w(E_\mathcal{R}^e)}{\dbinom{n}{2}(r-1)} \]

donde  $w(E_\mathcal{R}^e)$ denota la suma de todos los pesos de los arcos del grafo de competitividad evolutivo.
\end{defi}

\begin{defi}
Decimos que $\mathcal{R}$ es más competitivo que $\mathcal{S}$ con respecto a la fuerza media normalizada si $NS(\mathcal{R}) > NS(\mathcal{S})$.
\end{defi}

\begin{nota}
El coeficiente de ``clustering'' mide cuántos nodos tienden a agruparse\footnote{Traducción de cluster.}
\end{nota}

\begin{defi}
El coeficiente de ``clustering'' $C_i$ de un nodo $i$ se define como

\[ C_i = \dfrac{e_i}{\dbinom{k_i}{2}} \]

donde $k_i$ es el número de vecinos del nodo $i$, $e_i$ es el número de pares conectados entre los vecinos de $i$, y $\binom{k_i}{2}$ representa todos los posibles entre los vecinos de $i$.
\end{defi}

\begin{defi}
Dada una familia de rankings $\mathcal{R}$, el coeficiente de ``clustering'' de $\mathcal{R}$ de $\mathcal{R}$ es la media de los coeficientes de ``clustering'' de los nodos del grafo de competitividad evolutivo $G_e(\mathcal{R})$, es decir,

\[ C(\mathcal{R}) = \dfrac{1}{n} \sum_{i \in \mathcal{N}} C_i \]
\end{defi}

\begin{defi}
Decimos que $\mathcal{R}$ es más competitivo que $\mathcal{S}$ con respecto al coeficiente de ``clustering'' si $C(\mathcal{R}) > C(\mathcal{S})$.
\end{defi}

\begin{defi}
Dados dos rankings $c_1$ y $c_2$ de un conjunto $\mathcal{N}$ de nodos de $n$ elementos, el coeficiente $\tau$ de Kendall se define como

\[ \tau(c_1, c_2) = \dfrac{\tilde{K}(c_1, c_2) - K(c_1, c_2)}{\dbinom{n}{2}} \]

donde $\tilde{K}(c_1, c_2)$ denota el número de pares $(i,j)$ que no ``compiten'' con respecto a $\mathcal{R} = \{c_1, c_2\}$, y $K(c_1, c_2)$ denota el número de pares $(i,j)$ que ``compiten''.
\end{defi}

\begin{nota}
Notar que $\binom{n}{2}$ es el número de todos los posibles pares de nodos $(i,j)$. Si consideramos el grafo de competitividad $G_c(\mathcal{R})$ con respecto a $\mathcal{R} = \{c_1, c_2\}$, entonces $K(c_1, c_2) = |E_\mathcal{R}|$,el número de arcos de $G_c(\mathcal{R})$, y $\tilde{K}(c_1, c_2) = \binom{n}{2} - |E_\mathcal{R}|$, entonces

\[ \tau(c_1,c_2) = 1 - \dfrac{2 |E_\mathcal{R}|}{\dbinom{n}{2}} = 1- \dfrac{4 |E_\mathcal{R}|}{n(n-1)} \]

El número de arcos $E_\mathcal{R}$ del grafo de competitividad $G_c(\mathcal{R})$ de una familia $\mathcal{R}$ está relacionado con el coeficiente de correlación de Kendall de dos rankings: si denotamos por $E(c_1, c_2)$ los arcos del grafo de competitividad de la familia $\{c_1, c_2\}$, tenemos que

\[ |E_\mathcal{R}| \geq \max_{c_1, c_2 \in \mathcal{R}} |E(c_1, c_2)| \geq \dfrac{n(n-1)}{4}(1 - \min \tau(c_1, c_2)) \]

y esta desigualdad es, en efecto, una igualdad cuando $r=2$. De forma similar, si $E_\mathcal{R} = \cup_{c_1, c_2 \in \mathcal{R}} E(c_1, c_2)$, entonces

\[ |E_\mathcal{R}| \leq \sum_{c_1, c_2 \in \mathcal{R}} |E(c_1, c_2)| = \dfrac{n(n-1)}{4} \left( \dbinom{r}{2} - \sum_{c_1, c_2 \in \mathcal{R}} \tau(c_1, c_2) \right) \]

Esta desigualdad se hace igualdad cuando $r=2$.
\end{nota}

\begin{defi}
Podemos definir un coeficiente $\tau(\mathcal{R})$ de correlación de Kendall de una familia $\mathcal{R}$ de $r \geq 2$ rankings: siguiendo la idea original definición (número de pares $\tilde{K}(\mathcal{R})$ que no compiten, menos pares que compiten $K(\mathcal{R})$), dividido entre entre el número de todos los posibles pares $\binom{n}{2}$, tenemos

\[ \tau(\mathcal{R}) = \dfrac{\tilde{K}(c_1,c_2) - K(c_1, c_2)}{\dbinom{n}{2}} = 1 - \dfrac{2 |E_\mathcal{R}|}{\dbinom{n}{2}} = 1 - \dfrac{4 |E_\mathcal{R}|}{n(n-1)} \]

También podemos construir un coeficiente de correlación evolutivo de Kendall $\tau_e(\mathcal{R})$ teniendo en cuenta el número de veces que cada par de nodos compiten. Definimos

\[ \tau_e(\mathcal{R}) = 1 - \dfrac{2w(E_\mathcal{R}^e)}{\dbinom{n}{2}(r-1)} \]

donde $w(E_\mathcal{R}^e)$ denota la suma de todos los pesos de los arcos del grafo de competitividad evolutivo. El denominador  $\binom{n}{2}(r-1)$ representa la suma de todos los posibles arcos de sus mayores pesos.
\end{defi}

\begin{nota}
El coeficiente evolutivo de Kendall de una familia de rankings $\mathcal{R}$ se relaciona directamente con la fuerza media normalizada

\[\tau_e(\mathcal{R}) = 1 - 2NS(\mathcal{R}) \]
\end{nota}

\begin{defi}
Decimos que $\mathcal{R}$ es más competitivo que $\mathcal{S}$ con respecto al coeficiente de Kendall si $\tau_e(\mathcal{R}) < \tau_e(\mathcal{S})$.
\end{defi}

\begin{nota}
Notar que un coeficiente más pequeño de Kendall $\tau_e(\mathcal{R})$ hace que $\mathcal{R}$ sea más competitivo.
\end{nota}

\begin{defi}
La desviación típica de victorias $w_i$ que cada equipo ha logrado a lo largo en una temporada puede ser definida así:

\[ \sigma = \sqrt{\dfrac{1}{n} \sum_{i=1}^{n}\left(w_i - \dfrac{1}{2}\right)^2 } \]

donde $n$ es el número de equipos.
\end{defi}

\begin{nota}
En general, cuanto mayor es $\sigma$, menor es el equilibrio competitivo (y mayor es la desigualdad competitiva).\\

En una liga donde cada equipo tiene la misma probabilidad de ganar un partido, $\sigma = 0$, y por tanto, un incremento de $\sigma$ significa un decremento en el equilibrio competitivo.
\end{nota}

\begin{defi}
Se dice que $r$ rankings han aumentado su competitividad cuando ha disminuido su $\sigma$.
\end{defi}

\begin{defi}
Definimos NAMSI como
\[ NAMSI =  \sqrt{\dfrac{\sum\limits_{i=1}^{n} \left( w_i - \dfrac{1}{2} \right)^2}{\sum\limits_{i=1}^{n} \left(w_{i, \max} -\dfrac{1}{2}\right)^2}} \]

donde $w_{i, \max}$ es el ratio de victorias del equipo $i$ cuando hay predictibilidad completa: equipo $1$ gana todos sus partidos, equipo $2$ gana todos sus partidos menos $2$ (como local y visitante),..., equipo $n$ pierde todos sus partidos.

\end{defi}

\begin{defi}
El índice HICB se define como

\[ HICB = 100n \sum_{i=1}^{n} s_i^2 \]

donde $s_i$ es el ratio de puntos conseguidos en una temporada por el equipo $i$.
\end{defi}

\begin{nota}
Un incremento del coeficiente HICB significa una disminución del equilibrio competitivo.
\end{nota}

\begin{defi}
Se define el Churn como

\[ C_t = \dfrac{1}{n} \sum_{i=1}^{n} |c_{i,t} - c_{i,t-1}| \]

donde $c_{i,t}$ es el ranking del equipo $i$ in la temporada $t$.
\end{defi}

\begin{defi}
Se difine el Churn Ajustado como

\[ C_{ad} = \dfrac{C_t}{C_{t, \max}} \]

donde $C_{t, \max}$ es el máximo valor de $C_t$ dada una liga de $n$ equipos.
\end{defi}

\begin{nota}
Este indice indica equilibrio competitivo entre temporadas.\\

Si dos rankings son iguales, $C_t = 0$.\\

Se considera que valores grandes de $C_t$ implican altos valores en el equilibrio competitivo.
\end{nota}

\begin{nota}
Notar que el Churn Ajustado es una ``footrule'' de Spearman generalizada $D(c_t, c_{t+1})$. De hecho, $D(c_t, c_{t+1}) = nC_t$
\end{nota}

\begin{defi}
Dado un conjunto finito $\mathcal{R} = \{c_1,c_2,\dots, c_r\}$ de rankings, decimos que el par de nodos $(i,j) \in \mathcal{N}$ ``compiten'' si existe $c_s, c_t \in \{1,2,\dots, r\}$ tal que $i \prec_{c_s} j$, pero $j \prec_{c_t} i$, es decir, $i$ y $j$ intercambian sus posiciones relativas entre los rankings $c_s$ y $c_t$. 
\end{defi}

\begin{nota}
La competitividad entre dos nodos $i, j \in \mathcal{N}$ está fuertemente relacionada con el hecho de que $(i,j)$ es una inversión de un ranking de la familia.\\

Recuerda que una inversión en un ranking $c$ es un par de dos nodos $(i,j)$ tal que
\[(i-j)(c^{-1}(i) - c^{-1}(j)) < 0\]
\end{nota}

\begin{lema}\label{lema:rankings}
Dada un conjunto finito $\mathcal{R} = \{c_1, c_2, \dots, c_r\}$ of rankings, las siguientes condiciones son equivalentes:

\begin{itemize}
\item El par de nodos $(i,j)$ compiten.
\item Existe $c_s \in \{c_1,\dots,c_{r-1}\}$ tal que $i$ y $j$ intercambian sus posiciones relativas entre los rankings $c_s$ y $c_{s+1}$.
\item Existe un renombramiento de los nodos tal que $c_1 = id \equiv (1,2,\dots, n)$ y algún $c_s \in \{c_2,\dots,c_r\}$ con una inversión de la forma $(i,j)$.
\end{itemize} 
\end{lema}

\begin{nota}
El coste computacional de construir el grafo de competitividad $G_c(\mathcal{R}) = (\mathcal{N}, E_\mathcal{R})$ de la familia de rankings $\mathcal{R} = \{c_1,\dots,c_r\}$, donde $\mathcal{N} = \{1,\dots,n\}$ es de orden $rn^2$, ya que por el lema $\ref{lema:rankings}$, después de renombrar los nodos tal $c_1 = id$ (que tiene un coste de $rn$ en el peor caso), sólo tenemos que que encontrar las inversiones entre $c_1$ y cada una los $c_s$, que tiene un coste computacional del orden de $(r-1)\dfrac{n}{2} \approx rn^2$
\end{nota}

\begin{defi}
Si tenemos una familia de rankings $\mathcal{R} = \{c_1,\dots,c_r\}$ de nodos $\mathcal{N} = \{1,\dots,n\}$ and fijamos $i \in \mathcal{N}$, el conjunto de competitividad $C(i)$ de un nodo $i$ es el conjunto de elementos de $\mathcal{N}$ que ``compiten'' con $i$, junto con $i$, es decir,
\[C(i) = \{j \in \mathcal{N} \mid (i,j) \text{ compiten} \} \cup \{i\} \] 
\end{defi}

\begin{nota}
La información local del grafo de competitividad da propiedades del conjunto de competitividad del nodo, ya que es directo comprobar que $C(i)$ corresponde a $i$ junto con todos sus vecinos en el grafo de competitividad $G_c(\mathcal{R})$. 
\end{nota}

\begin{defi}
Si tomamos una familia de rankings $\mathcal{R} = \{c_1,\dots, c_r\}$ de nodos $\mathcal{N}$, un conjunto $C \subseteq \mathcal{N}$ se llama conjunto de comprtidores si hay un conjunto maximal con respecto a la propiedad de competición entre sus elementos, es decir, dados dos elementos $i,j \in C$, $(i,j)$ compiten y $C$ es maximal con respecto a esta propiedad.
\end{defi}

\begin{nota}
Los conjuntos de competidores son exactamente los subgrafos completos maximales (maximal camarillas) de $\mathcal{G_c(\mathcal{R})}$. Notar que dos nodos compiten sii pertenecen al mismo conjunto de competidores. Más aún, se puede comprobar que un conjunto de nodos $C \subseteq \mathcal{N}$ es un conjunto de competidores sii 

\[C = \bigcap_{i \in C} C(i)\]
\end{nota}

La nota anterior remarca el hecho de que las camarillas máximas de $G_c(\mathcal{R})$ corresponden a los conjuntos de competidores. Si consideramos otros conjuntos estructurales de nodos de $G_c(\mathcal{R})$, tales como las componentes conexas de $G_c(\mathcal{R})$, obtenemos otro conjunto de competidores más débil, como sigue:

\begin{defi}
Si tenemos una familia de rankings $\mathcal{R} = \{c_1,\dots,c_r\}$ de nodos $\mathcal{N} = \{1,\dots,n\}$, decimos que un par de nodos $(i,j) \in \mathcal{N}$ eventualmente compiten si existe $k \in \N$ y nodos $i_i,\dots,i_k \in \mathcal{N}$ tal que $(i,i_1)$ compiten, $(i_1,i_2)$ compiten,\dots, y $(i_k,j)$ compiten. 
\end{defi}

\begin{defi}
Un conjunto de nodos $D \subseteq \mathcal{N}$ se llama un conjunto de competidores habitual si es un conjunto maximal con respecto a la propiedad de la competición eventual entre sus elementos.
\end{defi}


\begin{nota}
Es directo comprobar que un par de nodos $(i,j)$ compiten, entonces eventualmente compiten. Más aún, $(i,j)$ eventualmente compiten sii $i$ y $j$ están conectados por un camino en el grafo de competitividad $G_c(\mathcal{R})$.\\

Notar que los conjuntos de competidores eventuales de $\mathcal{N}$ son las componentes conexas de $G_c(\mathcal{R})$ y dos nodos compiten eventualmente sii pertenecen al mismo conjunto de competidores eventuales. Claramente, si dos nodos pertenecen a diferentes conjuntos de competidores eventuales, no pueden competir. 
\end{nota}


\end{document}
