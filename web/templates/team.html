<nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" ng-click="gotoStart()" style="cursor:pointer">Rankings</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a ng-click="gotoStart()" style="cursor:pointer">
                        <img src="img/liga-bbva.png" aria-hidden="true">
                    </a>
                </li>
                <!--<li>
          <a href="#">
            <img src="img/liga-adelante.png" aria-hidden="true">
          </a>
        </li>-->
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown" ng-if="!user">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Iniciar sesión
                        <strong class="caret"></strong>
                    </a>
                    <ul class="dropdown-menu">
                        <div class="input-group input-group-lg" style="padding: 20px">
                            <form ng-submit="login(user)">
                                <div class="form-group">
                                    <label for="username">Usuario</label>
                                    <input ng-model="user.username" type="username" class="form-control" placeholder="Usuario" required>
                                </div>
                                <div class="form-group">
                                    <label for="password">Contraseña</label>
                                    <input ng-model="user.password" type="password" class="form-control" placeholder="Contraseña" required>
                                </div>
                                <div class="form-group">
                                    <label></label>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-default pull-right" style="margin-bottom: 20px">Iniciar sesión</button>
                                </div>
                            </form>
                            <a href="register">Registarse</a>
                        </div>
                    </ul>
                </li>
                <li ng-if="user">
                    <a href="profile" class="dropdown-toggle" data-toggle="dropdown">
	 	{{user.username}}
	 </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="row">
    <div class="col-md-2 column">
        <ul class="nav nav-pills nav-stacked">
            <li>
              <a href="bbva/prediction">
                  <span class="glyphicon glyphicon-signal"></span> Predicción</a>
            </li>
            <li class="active">
                <a href="#temporadas">
                    <span class="glyphicon glyphicon-home"></span> Temporadas</a>
            </li>
            <ul>
                <li ng-repeat="season in seasons"><a href="bbva/{{season.season.replace('/','-')}}">{{season.season}}</a>
                </li>
            </ul>

            <li>
                <a href="#equipos">
                    <span class="glyphicon glyphicon-film"></span> Equipos</a>
            </li>
            <ul>
                <li ng-repeat="team in teams"><a href="bbva/team/{{team.id}}">{{team.nombre}}</a>
                </li>
            </ul>

            <!--<li>
                <a href="#competitividad">
                    <span class="glyphicon glyphicon-cloud"></span> Estadísticas</a>
            </li>
            <ul>
                <li>Estadística</li>
            </ul>-->
        </ul>
    </div>

    <!----------------------------------------- -->

    <div class="col-md-10 column">

        <h1>{{team_stats.name}}</h1>
        <img src="img/escudos/{{team_id}}.png" class="img img-responsive center-block" />
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-th"></span> Estadísticas globales</div>
            <div class="panel-body">
                <table class="table">
                    <thead>
                        <th>Estadística</th>
                        <th>Número</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Número de temporadas en primera división</td>
                            <td>{{team_stats.seasons}}</td>
                        </tr>
                        <tr>
                            <td>Número de goles a favor</td>
                            <td> {{team_stats.local_goals_favor + away_goals_favor}}</td>
                        </tr>
                        <tr>
                            <td>Número de goles en contra</td>
                            <td> {{team_stats.local_goals_contra + away_goals_contra}}</td>
                        </tr>
                        <tr>
                            <td>Número de victorias como local</td>
                            <td> {{team_stats.local_win}}</td>
                        </tr>
                        <tr>
                            <td>Número de empates como local</td>
                            <td> {{team_stats.local_draw}}</td>
                        </tr>
                        <tr>
                            <td>Número de derrotas como local</td>
                            <td> {{team_stats.local_defeat}}</td>
                        </tr>
                        <tr>
                            <td>Número de victorias como visitante</td>
                            <td> {{team_stats.away_win}}</td>
                        </tr>
                        <tr>
                            <td>Número de empates como visitante</td>
                            <td> {{team_stats.away_draw}}</td>
                        </tr>
                        </tr>
                        <td>Número de derrotas como visitante</td>
                        <td> {{team_stats.away_defeat}}</td>
                        </tr>
                        <tr>
                            <td>Número de partidos jugados como local</td>
                            <td> {{team_stats.local_total}}</td>
                        </tr>
                        <tr>
                            <td>Número de partidos jugados como visitante</td>
                            <td> {{team_stats.away_total}}</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de victorias como local</td>
                            <td> {{team_stats.local_win/team_stats.local_total*100 | number:4}} %</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de empates como local</td>
                            <td> {{team_stats.local_draw/team_stats.local_total*100 | number:4}} %</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de derrotas como local</td>
                            <td> {{team_stats.local_defeat/team_stats.local_total*100 | number:4}} %</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de victorias como visitante</td>
                            <td> {{team_stats.away_win/team_stats.away_total*100 | number:4}} %</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de empates como visitante</td>
                            <td> {{team_stats.away_draw/team_stats.away_total*100 | number:4}} %</td>
                        </tr>
                        <tr>
                            <td>Porcentaje de derrotas como visitante</td>
                            <td> {{team_stats.away_defeat/team_stats.away_total*100 | number:4}} %</p>
                        </tr>

                    </tbody>

                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 column">
                <div class="panel panel-default" ng-controller="LocalCtrl" id="local">
                    <div class="panel-heading">
                        <span class="glyphicon glyphicon-th"></span> Resultados como local</div>
                    <div class="panel-body" id="panel-locales">
                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels" series="series" options="options" legend="true"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-6 column">
                <div class="panel panel-default" ng-controller="AwayCtrl" id="away">
                    <div class="panel-heading">
                        <span class="glyphicon glyphicon-th"></span> Resultados como visitante</div>
                    <div class="panel-body" id="panel-visitantes">
                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels" series="series" options="options" legend="true"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 column">
                <div class="panel panel-default" ng-controller="GoalsLocalCtrl" id="local">
                    <div class="panel-heading">
                        <span class="glyphicon glyphicon-th"></span> Goles a favor y en contra como local</div>
                    <div class="panel-body" id="panel-locales">
                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels" series="series" options="options" legend="true"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-6 column">
                <div class="panel panel-default" ng-controller="GoalsAwayCtrl" id="away">
                    <div class="panel-heading">
                        <span class="glyphicon glyphicon-th"></span> Goles a favor y en contra como visitante</div>
                    <div class="panel-body" id="panel-visitantes">
                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels" series="series" options="options" legend="true"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-th"></span> Estadísticas por resultado</div>
            <div class="panel-body">
                <table class="table">
                    <thead>
                        <th>Resultado</th>
                        <th>Número de veces</th>
                    </thead>
                    <tbody>
                        <tr ng-repeat="(key, value) in team_stats.results.local">
                            <td>{{key}}</td>
                            <td>{{value}}</td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>

    </div>
</div>
